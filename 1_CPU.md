# CPU

仅介绍少数用于深度学习的CPU，其他关于CPU的知识暂不介绍

先去看看附件1和附件2

&nbsp;

## CPU的种类（I和A）

&nbsp;

### **桌面级CPU（默认功耗范围：60w-125w）**

2021年12月，主流的CPU主要是Intel的12代酷睿，AMD这边是5000系锐龙（第4代）

&nbsp;

适用于深度学习的桌面级CPU：

Intel：

10代：i9-10900K，i9-10850K，i9-10900F，i7-10700K，i7-10700F，i5-10600K，i5-10400F

11代：i9-11900K，i9-11900F，i7-11700K，i5-11600K

12代：i9-12900K，i7-12700K，i5-12600K

AMD：

Ryzen 3000：R9-3950X，R9-3900X，R7-3800X，R7-3700X，R5-3600，R7-4700G，R5-3600G

Ryzen 5000：R9-5950X，R9-5900X，R7-5800X，R5-5600X

这些CPU基本上需要240水冷/6热管风冷，机箱风道不好的时候需要280水冷和8热管风冷

9代和更老的8代7代酷睿属于捡垃圾了，能买到，T系列不要买

2代和1代锐龙也属于捡垃圾，基本上可以买到

Ryzen 3000 XT系列性价比不高，能不买就不买，3600X性价比也不高

&nbsp;

### **HEDT（High End Desktop）平台的CPU（默认功耗范围：90w-280w）**

2020年11月，主流的CPU主要是Intel的10代X系列处理器，AMD这边是3代线程撕裂者。

&nbsp;

10代X系列和9代以及7代都是同一个SkyLake架构，其中9代是7代的升级版，频率提升了200MHz，10代是9代的升级版，频率提升了200MHz，同时修复了漏洞，同时把CPU上的AVX512单元增加了一倍

3代线程撕裂者是核心比较多的，适合多线程的处理器，以3990X为例，64核心128线程，基础频率2.9GHz，最大加速频率4.3GHz，三级缓存256MB，最大支持内存DDR4 3200 256GB。

&nbsp;

适用于深度学习的桌面级CPU：

Intel：

X系列处理器推荐几款典型的：i7-7740X，i7-7800X，i9-7900X，i9-7940X，i9-9940X，i9-10900X，i9-10920X，i9-10980XE，其他的不太推荐

AMD：

ThreadRipper-1950X，TR-2950X，TR-3960X，TR-3970X，TR-3990X

这些CPU基本上需要280水冷/8热管风冷，机箱风道不好的时候需要360水冷

HEDT平台的捡垃圾是很危险的事情，CPU的质量参差不齐

&nbsp;

### **服务器平台的CPU**（功耗范围：90w-225w）

2020年7月，主流的CPU主要是Intel的第二代可扩展Xeon，AMD这边是2代霄龙。

一般情况下，这些CPU是无法通过零售买到的，只会给服务器和工作站厂商，这些CPU的种类特别多，包括ES和QS的话，估计每代都有上百种。主要特点是核心多、PCIe多、内存通道多。一般只会用于超过4张显卡的服务器上。

&nbsp;

Intel的第三代可扩展Xeon已经发布，但还买不到。

第一、  二代可扩展Xeon推荐的CPU：Gold 6140QS(Gold6139)，Gold 5115，Silver 4114

AMD这边由于主板很难买到，不推荐购买。

&nbsp;

这些CPU如果是DIY，建议280-360水冷，如果是机架式服务器，基本上是风冷+工业扇

更老的CPU，推荐6核心以上的Xeon E5v4和10核心以上的Xeon E5v3，Xeon E5v2比较老旧，仅推荐顶级型号，如E5-2697v2和E5-2690v2

推荐型号：

Xeon Scalable：Gold 6139，Gold 5115，Silver 4114（Platinum没必要）

E5v4：E5-2650v4，E5-2630v4，E5-2620v4

E5v3：E5-2678v3，E5-2683v3，E5-2630v3，E5-1650v3

E5v2：E5-2697v2，E5-2690v2

E3v6：E3-1270v6

&nbsp;

### **工作站平台的CPU（功耗范围：90w-225w）**

工作站平台的CPU很少见

Intel这边最新的工作站平台的CPU是Xeon-W系列，基本上是至强可扩展处理器的换皮加压版本，老的E5也有带W的处理器，如E5-2687W v4和E5-2687W v3。

AMD这边是TR-2970WX和TR-2990WX，已经退市，TR Pro-3995WX系列推荐TR Pro-3945WX

推荐的工作站平台的CPU：Xeon-W2191B，Xeon E5-2687W v3，TR Pro-3945WX

&nbsp;

## CPU的搭配

### **桌面级CPU与主板**

Intel：

10代酷睿，Z490

11代酷睿，Z590

12代酷睿，Z690

AMD：

3代锐龙，X570

5代锐龙，X570和X570S

&nbsp;

### **HEDT与主板**

Intel：

X299（不推荐X299X）

AMD：

X399（2代和1代线程撕裂者）TRX40（3代线程撕裂者）

&nbsp;

### **服务器平台的CPU与主板**

Intel：

3代4代E5，可以配C612和X99

1-2代可扩展至强，可以配C621和C624

AMD：

SP3芯片组，配的主板少

&nbsp;

### **工作站平台的CPU与主板**

Intel：C621，如果是W-2000系列，可以配C422

AMD：X399，TRX40，如果是TR Pro-3945WX之类的CPU，推荐WRX80

&nbsp;

### **内存**

DDR4 2400，工作站和服务器用DDR4 2133即可

&nbsp;

### **显卡和硬盘**

在显卡少于30张的时候，不必讨论PCIe通道对计算情况的影响。硬盘建议用固态硬盘，因为大部分CPU都有很多的线程。

10代酷睿支持WiFi6.0

3代锐龙和2代霄龙支持PCIe4.0

&nbsp;

## CPU的软件适配

深度学习大量使用了浮点运算，一般会使用SSE指令集和AVX指令集，有条件的可以使用AVX2和AV512

&nbsp;

## CPU的注意事项

9-12代酷睿在深度学习上不存在温度高功耗高的问题，但如果是长时间的进行编码，散热将很难控制。Intel的CPU的最高工作温度是105摄氏度，高于这个温度会自动关机。

3代锐龙的特点是功耗低但热量高，导致的结果是大量的热量无法散出去，即使是顶级分体式水冷依旧有80多度的情况，这种情况叫积热。由于积热的存在，散热器的提升效果不明显，好的6热管散热器可以比肩360水冷。3代锐龙的最高工作温度是95度，所以一般要求AMD的散热好于Intel。

CPU存在体质问题，2019年的3700X大多数性能比2020年的3700X差一些。

&nbsp;

PCIe通道只要记住：

虽然随着CPU的发展，PCIe通道越来越多，但可以这么认为：

**桌面级CPU给显卡的PCIe只有16条，最多接2张显卡**

**HEDT给显卡的PCIe只有32条，最多接4张显卡**

**服务器和工作站的PCIe最多可以给48条，最多接6张显卡**

其他的PCIe通道可能是从南桥扩展出来的，速度难以保证

&nbsp;

## CPU的价格（选购和捡垃圾）

基本上的规则是买新不买旧

旧的CPU推荐的有：

Intel：i9-9900K，i7-8700K，i7-8086K，i7-6800K，i7-6950X

AMD：R7-2700X，R5-2600，R7-1800X，R7-1700X

捡垃圾有风险，更老的垃圾比如E3，FX之类的请慎重
